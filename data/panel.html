<html>
  <!-- Vim: set ts=8 sts=2 et sw=2 tw=80: -->
  <head>
    <meta charset="utf-8">
    <style type="text/css">
      .auto:hover{background-color:green;color:white;}
      .auto{padding-left:20px;padding-top:10px;padding-bottom:10px;
        font-size:150%;background-color:#B5FFB7;}
      .lang:hover{background-color:#DEE2E8;}
      .lang{padding-left:20px;}
    </style>
  </head>
  <body>
    <script>
      function loadJSON(aCallback) {
        var xobj = new XMLHttpRequest();
        xobj.overrideMimeType("application/json");
        xobj.open('GET', 'languages-all.json', true);
        xobj.onreadystatechange = function () {
          if (xobj.readyState == 4 && xobj.status == "200") {
            // Required use of an anonymous callback as .open will NOT return a
            // value but simply returns undefined in asynchronous mode
            aCallback(xobj.responseText);
          }
        };
        xobj.send(null);
      }

      function generateList(aResponse) {
        // Parse JSON string into object
        var languageList = JSON.parse(aResponse);

        var keys = Object.keys(languageList);

        for (var i in keys) {
          var element = document.createElement("div");

          element.id = keys[i];
          if (keys[i] == "auto") {
            element.className = "auto";
            var label = document.createElement("b");
            label.setAttribute("data-l10n-id", "autodetect");
            element.appendChild(label);
          }
          else {
            element.className = "lang";
            element.appendChild(document.createTextNode(languageList[keys[i]]));
          }
          document.body.appendChild(element);
        }
      }

      loadJSON(generateList);
    </script>
  </body>
</html>
